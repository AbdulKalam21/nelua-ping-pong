/* Generated by Nelua 0.2.0-dev */
/* Compile command: i686-w64-mingw32-gcc -x c "bin/ping-pong.exe.c" -x none -o "bin/ping-pong.exe" -fwrapv -g -L lib -I include -static -lraylib -lopengl32 -lgdi32 -lwinmm */
/* Compile hash: 4KZhpKwcb9YijsctA2yFjh1ZA8iS */
/* ------------------------------ DIRECTIVES -------------------------------- */
/* Disable some warnings that the generated code can trigger. */
#if defined(__clang__)
  #pragma clang diagnostic ignored "-Wtype-limits"
  #pragma clang diagnostic ignored "-Wwrite-strings"
  #pragma clang diagnostic ignored "-Wunused"
  #pragma clang diagnostic ignored "-Wunused-parameter"
  #pragma clang diagnostic ignored "-Wmissing-field-initializers"
  #pragma clang diagnostic ignored "-Wparentheses-equality"
  #ifndef __cplusplus
    #pragma clang diagnostic ignored "-Wmissing-braces"
    #pragma clang diagnostic ignored "-Wincompatible-pointer-types"
    #pragma clang diagnostic error   "-Wimplicit-function-declaration"
    #pragma clang diagnostic error   "-Wimplicit-int"
  #else
    #pragma clang diagnostic ignored "-Wnarrowing"
  #endif
#elif defined(__GNUC__)
  #pragma GCC diagnostic ignored "-Wtype-limits"
  #pragma GCC diagnostic ignored "-Wwrite-strings"
  #pragma GCC diagnostic ignored "-Wunused-parameter"
  #pragma GCC diagnostic ignored "-Wunused-value"
  #pragma GCC diagnostic ignored "-Wunused-variable"
  #pragma GCC diagnostic ignored "-Wunused-function"
  #pragma GCC diagnostic ignored "-Wunused-but-set-variable"
  #pragma GCC diagnostic ignored "-Wmissing-field-initializers"
  #ifndef __cplusplus
    #pragma GCC diagnostic ignored "-Wmissing-braces"
    #pragma GCC diagnostic ignored "-Wincompatible-pointer-types"
    #pragma GCC diagnostic ignored "-Wdiscarded-qualifiers"
    #pragma GCC diagnostic error   "-Wimplicit-function-declaration"
    #pragma GCC diagnostic error   "-Wimplicit-int"
  #else
    #pragma GCC diagnostic ignored "-Wnarrowing"
  #endif
#endif
#if defined(_WIN32) && !defined(_CRT_SECURE_NO_WARNINGS)
  #define _CRT_SECURE_NO_WARNINGS
#endif
/* Macro used to perform compile-time checks. */
#if __STDC_VERSION__ >= 201112L
  #define NELUA_STATIC_ASSERT _Static_assert
#elif __cplusplus >= 201103L
  #define NELUA_STATIC_ASSERT static_assert
#else
  #define NELUA_STATIC_ASSERT(x, y)
#endif
/* Macro used to get alignment of a type. */
#if __STDC_VERSION__ >= 201112L
  #define NELUA_ALIGNOF _Alignof
#elif __cplusplus >= 201103L
  #define NELUA_ALIGNOF alignof
#elif defined(__GNUC__)
  #define NELUA_ALIGNOF __alignof__
#elif defined(_MSC_VER)
  #define NELUA_ALIGNOF __alignof
#else
  #define NELUA_ALIGNOF(x)
#endif
/* Checks if Nelua and C agrees on pointer size. */
NELUA_STATIC_ASSERT(sizeof(void*) == 4 && NELUA_ALIGNOF(void*) == 4, "Nelua and C disagree on pointer size or alignment");
/* Enable 64 bit offsets for stdio APIs. */
#if !defined(_FILE_OFFSET_BITS) && __SIZEOF_LONG__ >= 8
  #define _FILE_OFFSET_BITS 64
#endif
/* Enable POSIX APIs in included headers. */
#if !defined(_POSIX_C_SOURCE) && !defined(_XOPEN_SOURCE) && !defined(_GNU_SOURCE) && !defined(_DEFAULT_SOURCE)
  #if defined(__gnu_linux__)
    #define _GNU_SOURCE
  #else
    #define _XOPEN_SOURCE 600
  #endif
#endif
#include <raylib.h>
#include <stdint.h>
/* ------------------------------ DECLARATIONS ------------------------------ */
static const int16_t main_ballSpeed = 500;
static int16_t main_ballXVelocity;
static float main_ballYVelocity = 0.0f;
static Rectangle main_ai;
static Rectangle main_ball;
static Rectangle main_player;
static int16_t main_aiYVelocity = 0;
static const int16_t main_aiSpeed = 700;
static int nelua_main(int nelua_argc, char** nelua_argv);
/* ------------------------------ DEFINITIONS ------------------------------- */
int nelua_main(int nelua_argc, char** nelua_argv) {
  main_ballXVelocity = (-main_ballSpeed);
  main_ai = (Rectangle){1066.66667f, 260.0f, 40.0f, 150.0f};
  main_ball = (Rectangle){590.0f, 310.0f, 40.0f, 40.0f};
  main_player = (Rectangle){160.0f, 260.0f, 40.0f, 150.0f};
  SetConfigFlags(64U);
  InitWindow(1280, 720, "Ping Pong");
  while((!WindowShouldClose())) {
    float dt = GetFrameTime();
    main_ball.x = (main_ball.x + (main_ballXVelocity * dt));
    main_ball.y = (main_ball.y + (main_ballYVelocity * dt));
    main_ai.y = (main_ai.y + (main_aiYVelocity * dt));
    if(((((main_ball.x > (main_player.x - main_ball.width)) && (main_ball.x < (main_player.x + main_player.width))) && (main_ball.y > (main_player.y - main_ball.height))) && (main_ball.y < (main_player.y + main_player.height)))) {
      main_ballXVelocity = main_ballSpeed;
      float middleBall = (main_ball.y + (main_ball.height / 2));
      float middlePlayer = (main_player.y + (main_player.height / 2));
      float collisionPosition = (middleBall - middlePlayer);
      main_ballYVelocity = (collisionPosition * 5);
    }
    if(((((main_ball.x > (main_ai.x - main_ball.width)) && (main_ball.x < (main_ai.x + main_ai.width))) && (main_ball.y > (main_ai.y - main_ball.height))) && (main_ball.y < (main_ai.y + main_ai.height)))) {
      main_ballXVelocity = (-main_ballSpeed);
      float middleBall = (main_ball.y + (main_ball.height / 2));
      float middleAi = (main_ai.y + (main_ai.height / 2));
      float collisionPosition = (middleBall - middleAi);
      main_ballYVelocity = (collisionPosition * 5);
    }
    if((main_ball.y < (main_ai.y - main_ball.height))) {
      main_aiYVelocity = (-main_aiSpeed);
    } else if((main_ball.y > (main_ai.y + main_ai.height))) {
      main_aiYVelocity = main_aiSpeed;
    } else {
      main_aiYVelocity = 0;
    }
    if((main_ball.y < 0)) {
      main_ball.y = 0.0f;
      main_ballYVelocity = (-main_ballYVelocity);
    }
    if((main_ball.y > (720U - main_ball.height))) {
      main_ball.y = (720U - main_ball.height);
      main_ballYVelocity = (-main_ballYVelocity);
    }
    if((main_ball.x < 0)) {
      main_ball.x = (float)(640.0 - main_ball.width);
      main_ball.y = (float)(360.0 - main_ball.height);
      main_ballYVelocity = 0.0f;
      main_ballXVelocity = main_ballSpeed;
    }
    if((main_ball.x > (1280U - main_ball.width))) {
      main_ball.x = (float)(640.0 - main_ball.width);
      main_ball.y = (float)(360.0 - main_ball.height);
      main_ballYVelocity = 0.0f;
      main_ballXVelocity = (-main_ballSpeed);
    }
    if((main_player.y < 0)) {
      main_player.y = 0.0f;
    }
    if((main_player.y > (720U - main_player.height))) {
      main_player.y = (720U - main_player.height);
    }
    if(IsKeyDown(265)) {
      main_player.y = (main_player.y - (700 * dt));
    }
    if(IsKeyDown(264)) {
      main_player.y = (main_player.y + (700 * dt));
    }
    BeginDrawing();
    ClearBackground(BLACK);
    DrawFPS(0, 0);
    DrawRectangleRec(main_player, RAYWHITE);
    DrawRectangleRec(main_ball, RAYWHITE);
    DrawRectangleRec(main_ai, RAYWHITE);
    EndDrawing();
  }
  CloseWindow();
  return 0;
}
int main(int argc, char** argv) {
  return nelua_main(argc, argv);
}
